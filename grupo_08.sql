-- MYSQL
create DATABASE IF NOT exists AD5;
USE AD5;
create table ´CENTROS´ (
´NUMCE´ INT(4) NOT NULL,
´NOMCE´ varchar(25),
´DIRCE´ varchar(25)
);
CREATE TABLE ´DEPARTAMENTOS´ (
´NUMDE´ INT(3) NOT NULL,
´NUMCE´ INT(4),
´DIREC´ INT(3),
´TIDIR´ CHAR(1),
´PRESU´ numeric (3,1),
´DEPDE´ INT(3),
´NOMDE´ VARCHAR(20)
);
CREATE TABLE ´EMPLEADOS´ (
´NUMEM´ INT(3) NOT NULL,
´EXTEL´ INT(3),
´FECNA´ DATE ,
´FECIN´ DATE,
´SALAR´ INT(5),
´COMIS´ INT(3),
´NUMHI´ INT(1),
´NOMEM´ VARCHAR (10),
´NUMDE´ INT(3)
);

-- Primary key de todas las tablas
ALTER TABLE ´CENTROS´
ADD PRIMARY KEY (´NUMCE´);

ALTER TABLE ´DEPARTAMENTOS´
ADD PRIMARY KEY (´NUMDE´);

ALTER TABLE ´EMPLEADOS´
ADD PRIMARY KEY (´NUMEM´);

-- Foreign key que hayan en las tablas
ALTER TABLE ´DEPARTAMENTOS´
ADD CONSTRAINT Empleados_Departamentos_FK
FOREIGN KEY (´NUMCE´) REFERENCES ´CENTROS´ (´NUMCE´);
        
ALTER TABLE ´DEPARTAMENTOS´
ADD CONSTRAINT Departamentos_FK
FOREIGN KEY (´DEPDE´) REFERENCES ´DEPARTAMENTOS´ (´NUMDE´);

ALTER TABLE ´EMPLEADOS´
ADD CONSTRAINT Departamentos_EmpleadosFK
FOREIGN KEY (´NUMDE´) REFERENCES ´DEPARTAMENTOS´ (´NUMDE´);

-- Introducimos datos en la tabla DEPARTAMENTOS
INSERT INTO ´DEPARTAMENTOS´ (´NUMDE´,´NUMCE´,´DIREC´,´TIDIR´,´PRESU´,´DEPDE´,´NOMDE´) VALUES
(100,10,260,'P',72,null,'DIRECCION GENERAL'),
(110,20,180,'P',90,100,'DIRECCION COMERCIAL'),
(111,20,180,'F',66,110,'SECTOR INDUSTRIAL'),
(112,20,270,'P',54,110,'SECTOR SERVICIOS'),
(120,10,150,'F',18,100,'ORGANIZACIÓN'),
(121,10,150,'P',12,120,'PERSONAL'),
(122,10,350,'P',36,120,'PROCESO DE DATOS'),
(130,10,310,'P',12,100,'FINANZAS');
-- ME DA ERROR 1452. Cannot add or update a child row: a foreign key constraint fails"

-- Introducimos datos en la tabla CENTROS
INSERT INTO ´CENTROS´ (´NUMCE´,´NOMCE´,´DIRCE´)VALUES
(10,'SEDE CENTRAL','C/ATOCHA ,820,MADRID'),
(20,'RELACION CON CLIENTES','C/ATOCHA,405,MADRID');

-- Introducimos los datos en la tabla Empleados
INSERT INTO ´EMPLEADOS´ (´NUMEM´,´EXTEL´,´FECNA´,´FECIN´,´SALAR´,´COMIS´,´NUMHI´,´NOMEM´,´NUMDE´) 
VALUES 
  (110,350,10/11/1970,15/02/1985,1800,NULL,3,'CESAR',121),
  (120,840,09/06/1968,01/10/1988,1900,'110',1,'MARIO',112),
  (130,810,09/09/1965,01/02/1981,1500,'110',2,'LUCIANO',112),
  (150,340,10/08/1972,15/01/1997,2600,NULL,0,'JULIO',121),
  (160,740,09/07/1980,11/11/2005,1800,'110',2,'AUREO',111),
  (180,508,18/10/1974,18/03/1996,2800,'50',2,'MARCOS',110),
  (190,350,12/05/1972,11/02/1992,1750,NULL,4,'JULIANA',121),
  (210,200,28/09/1970,22/01/1999,1910,NULL,2,'PILAR',100),
  (240,760,26/02/1967,24/02/1989,1700,'100',3,'LAVINIA',111),
  (250,250,27/10/1976,01/03/1997,2700,NULL,0,'ADRIANA',100),
  (260,220,03/12/1973,12/07/2001,720,NULL,6,'ANTONIO',100),
  (270,800,21/05/1975,10/09/2003,1910,'80',3,'OCTAVIO',112),
  (280,410,10/01/1978,08/10/2010,1500,NULL,5,'DOROTEA',130),
  (285,620,25/10/1979,15/02/2011,1910,NULL,0,'OTILIA',122),
  (290,910,30/11/1967,14/02/1988,1790,NULL,3,'GLORIA',120),
  (310,480,21/11/1976,15/01/2001,1950,NULL,0,'AUGUSTO',130),
  (320,620,25/12/1977,05/02/2003,2400,NULL,2,'CORNELIO',122),
  (330,850,19/08/1958,01/03/1980,1700,'90',0,'AMELIA',112),
  (350,610,13/04/1979,10/09/1999,2700,NULL,1,'AURELIO',122),
  (360,750,29/10/1978,10/10/1998,1800,'100',2,'DORINDA',111),
  (370,360,22/06/1977,20/01/2000,1860,NULL,1,'FABIOLA',121),
  (380,880,30/03/1978,01/01/1999,1100,NULL,0,'MICAELA',112),
  (390,500,19/02/1976,08/10/2010,1290,NULL,1,'CARMEN',110),
  (400,780,18/08/1979,01/11/2011,1150,NULL,0,'LUCRECIA',111),
  (410,660,14/07/1968,13/10/1989,1010,NULL,0,'AZUCENA',122),
  (420,450,22/10/1966,19/11/1988,2400,NULL,0,'CLAUDIA',130),
  (430,650,26/10/1967,19/11/1988,1260,NULL,1,'VALERIANA',122),
  (440,760,26/09/1966,28/02/1986,1260,'100',0,'LIVIA',111),
  (450,880,21/10/1966,28/02/1986,1260,'100',0,'SABINA',112),
  (480,760,04/04/1965,28/02/1986,1260,'100',1,'DIANA',111),
  (490,880,06/06/1964,01/01/1988,1090,'100',0,'HORACIO',112),
  (500,750,08/10/1965,01/01/1987,1200,'100',0,'HONORIA',111),
  (510,550,04/05/1966,01/11/1986,1200,NULL,1,'ROMULO',110);
  
  -- Me da error 1292: Incorrect date value: '10/11/1970' for column '´FECNA´' at row 1






